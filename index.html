<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />


<?php
require 'config.php'; // Importa as variáveis de ambiente

// Dados do evento (ViewContent)
$data = [
    'event_name' => 'ViewContent', // Nome do evento
    'event_time' => time(),
    'action_source' => 'website',
    'event_source_url' => $_SERVER['HTTP_REFERER'] ?? 'https://mcdonalds-ifood.lat',

    'user_data' => [
        'fbc' => $_COOKIE['_fbc'] ?? '', 
        'fbp' => $_COOKIE['_fbp'] ?? '',
    ],

    'custom_data' => [
        'currency' => 'BRL',
        'value' => 19.90, // Preço do combo
        'content_name' => 'Combo 2 Lanches',
        'content_category' => 'Lanches',
        'num_items' => 2 // Número de itens no combo
    ],
];

// Enviar para a API do Facebook
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "https://graph.facebook.com/v18.0/$pixel_id/events?access_token=$access_token");
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode(['data' => [$data]]));
curl_setopt($ch, CURLOPT_HTTPHEADER, ['Content-Type: application/json']);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$response = curl_exec($ch);
curl_close($ch);

// Exibir resposta do Facebook (para testes)
echo $response;
?>




    <title>Promoção: 2 Lanches por R$19,90</title>
    <!-- Importando Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      /* Estilos gerais */
      .selected {
        border: 4px solid #fbbf24;
      }
      .card {
        position: relative;
      }
      .badge {
        position: absolute;
        top: 0.5rem;
        right: 0.5rem;
        background-color: #fbbf24;
        color: white;
        width: 1.5rem;
        height: 1.5rem;
        border-radius: 9999px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.75rem;
        font-weight: bold;
      }
      :root {
        --logo-height: 4rem;
      }
      .logo-size {
        height: var(--logo-height);
      }
      /* Preloader */
      #conteudo {
        display: none;
      }
      #preloader {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100vh;
        background-color: #fff;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 9999;
      }
      #preloader img {
        width: 150px;
      }
      /* Modal (popup) para upsell de bebida */
      #popupModal {
        /* Inicialmente oculto */
        display: none;
      }
    </style>
  </head>
  <body class="bg-gray-100">
    <!-- Cabeçalho -->
    <header
      class="flex items-center justify-between gap-2 md:min-h-[8rem] p-4 bg-white shadow-md"
    >
      <!-- Logo à esquerda -->
      <div class="flex items-center gap-2">
        <img
          src="imagens/logo-mc-m.png"
          class="logo-size"
          alt="Logo McDonald's"
        />
      </div>
      <!-- Carrinho e botão Entrar -->
      <div id="header-tooltip" class="flex items-center gap-4">
        <p id="cartPrice" class="text-lg font-bold">R$ 0,00</p>
        <div class="relative">
          <img
            src="imagens/icone-sacola-mc.svg"
            class="block max-h-[1.5rem] min-h-[1.5rem] min-w-[1.25rem] max-w-[1.25rem] md:min-h-[2.25rem] md:min-w-[1.75rem]"
            alt="Cart"
          />
          <div
            class="absolute -right-2 -top-2 grid h-4 w-4 place-content-center rounded-full bg-red-500 text-xs text-white"
          >
            <span id="cartBadge">0</span>
          </div>
        </div>
        <a href="#" rel="noopener noreferrer">
          <button
            class="hidden md:block h-10 w-36 bg-red-600 text-white font-bold rounded"
          >
            Entrar
          </button>
        </a>
      </div>
    </header>

    <img
      src="imagens/banner-mc-01.png"
      alt="Banner Promocional"
      class="w-full"
    />

    <!-- Seção de Sanduíches -->
    <section class="m-5 md:m-14">
      <header class="my-4 md:my-8">
        <h1
          class="text-[30px] font-bold leading-[36px]"
          style="font-family: 'Speedee', sans-serif"
        >
          Sanduíches
        </h1>
      </header>
      <!-- Grid de lanches (2 colunas) -->
      <div class="grid grid-cols-2 gap-5">
        <!-- Card 2: Big Mac -->
        <div
          class="card hover:scale-105 transition flex cursor-pointer flex-col overflow-hidden rounded-lg shadow-lg"
          data-id="2"
          data-count="0"
        >
          <div
            class="flex h-full max-h-36 items-end justify-center bg-gray-200 md:max-h-60"
          >
            <img
              src="imagens/big-mac.png"
              alt="Big Mac"
              class="mb-6 h-4/5 w-auto object-contain md:h-3/5"
            />
          </div>
          <div
            class="flex flex-col items-center justify-center gap-2 p-3 md:p-4"
          >
            <p class="font-bold text-red-600">Big Mac</p>
            <p class="text-sm text-gray-600">
              Dois hambúrgueres, molho especial e o sabor original!
            </p>
          </div>
        </div>
        <!-- Card 1: Big Mac Bacon -->
        <div
          class="card hover:scale-105 transition flex cursor-pointer flex-col overflow-hidden rounded-lg shadow-lg"
          data-id="1"
          data-count="0"
        >
          <div
            class="flex h-full max-h-36 items-end justify-center bg-gray-200 md:max-h-60"
          >
            <img
              src="imagens/big-mac-bacon.png"
              alt="Big Mac Bacon"
              class="mb-6 h-4/5 w-auto object-contain md:h-3/5"
            />
          </div>
          <div
            class="flex flex-col items-center justify-center gap-2 p-3 md:p-4"
          >
            <p class="font-bold text-red-600">Big Mac Bacon</p>
            <p class="text-sm text-gray-600">
              O clássico com um toque de bacon crocante!
            </p>
          </div>
        </div>
        <!-- Card 3: Quarteirão com Queijo -->
        <div
          class="card hover:scale-105 transition flex cursor-pointer flex-col overflow-hidden rounded-lg shadow-lg"
          data-id="3"
          data-count="0"
        >
          <div
            class="flex h-full max-h-36 items-end justify-center bg-gray-200 md:max-h-60"
          >
            <img
              src="imagens/quarteirão-com-queijo.png"
              alt="Quarteirão com Queijo"
              class="mb-6 h-4/5 w-auto object-contain md:h-3/5"
            />
          </div>
          <div
            class="flex flex-col items-center justify-center gap-2 p-3 md:p-4"
          >
            <p class="font-bold text-red-600">Quarteirão com Queijo</p>
            <p class="text-sm text-gray-600">
              Carne suculenta com queijo derretido em perfeita harmonia.
            </p>
          </div>
        </div>
        <!-- Card 4: Cheddar McMelt -->
        <div
          class="card hover:scale-105 transition flex cursor-pointer flex-col overflow-hidden rounded-lg shadow-lg"
          data-id="4"
          data-count="0"
        >
          <div
            class="flex h-full max-h-36 items-end justify-center bg-gray-200 md:max-h-60"
          >
            <img
              src="imagens/Cheddar-McMelt.png"
              alt="Cheddar McMelt"
              class="mb-6 h-4/5 w-auto object-contain md:h-3/5"
            />
          </div>
          <div
            class="flex flex-col items-center justify-center gap-2 p-3 md:p-4"
          >
            <p class="font-bold text-red-600">Cheddar McMelt</p>
            <p class="text-sm text-gray-600">
              Queijo cheddar no auge do sabor para uma experiência única.
            </p>
          </div>
        </div>
        <!-- Card 5: Mc Chicken -->
        <div
          class="card hover:scale-105 transition flex cursor-pointer flex-col overflow-hidden rounded-lg shadow-lg"
          data-id="5"
          data-count="0"
        >
          <div
            class="flex h-full max-h-36 items-end justify-center bg-gray-200 md:max-h-60"
          >
            <img
              src="imagens/Mc-Chicken.png"
              alt="Mc Chicken"
              class="mb-6 h-4/5 w-auto object-contain md:h-3/5"
            />
          </div>
          <div
            class="flex flex-col items-center justify-center gap-2 p-3 md:p-4"
          >
            <p class="font-bold text-red-600">Mc Chicken</p>
            <p class="text-sm text-gray-600">
              Frango empanado crocante com maionese especial.
            </p>
          </div>
        </div>
        <!-- Card 6: Mc Chicken Lemon-Pepper -->
        <div
          class="card hover:scale-105 transition flex cursor-pointer flex-col overflow-hidden rounded-lg shadow-lg"
          data-id="6"
          data-count="0"
        >
          <div
            class="flex h-full max-h-36 items-end justify-center bg-gray-200 md:max-h-60"
          >
            <img
              src="imagens/Mc-Chicken Lemon-Pepper.png"
              alt="Mc Chicken Lemon-Pepper"
              class="mb-6 h-4/5 w-auto object-contain md:h-3/5"
            />
          </div>
          <div
            class="flex flex-col items-center justify-center gap-2 p-3 md:p-4"
          >
            <p class="font-bold text-red-600">Mc Chicken Lemon-Pepper</p>
            <p class="text-sm text-gray-600">
              Um toque cítrico e apimentado que surpreende seu paladar.
            </p>
          </div>
        </div>
        <!-- Card 7: Mc Nífico Bacon -->
        <div
          class="card hover:scale-105 transition flex cursor-pointer flex-col overflow-hidden rounded-lg shadow-lg"
          data-id="7"
          data-count="0"
        >
          <div
            class="flex h-full max-h-36 items-end justify-center bg-gray-200 md:max-h-60"
          >
            <img
              src="imagens/Mc-Nífico-Bacon.png"
              alt="Mc Nífico Bacon"
              class="mb-6 h-4/5 w-auto object-contain md:h-3/5"
            />
          </div>
          <div
            class="flex flex-col items-center justify-center gap-2 p-3 md:p-4"
          >
            <p class="font-bold text-red-600">Mc Nífico Bacon</p>
            <p class="text-sm text-gray-600">
              Hambúrguer premium com bacon irresistivelmente crocante.
            </p>
          </div>
        </div>
        <!-- Card 8: Duplo Burger Bacon -->
        <div
          class="card hover:scale-105 transition flex cursor-pointer flex-col overflow-hidden rounded-lg shadow-lg"
          data-id="8"
          data-count="0"
        >
          <div
            class="flex h-full max-h-36 items-end justify-center bg-gray-200 md:max-h-60"
          >
            <img
              src="imagens/Duplo-Burger-Bacon.png"
              alt="Duplo Burger Bacon"
              class="mb-6 h-4/5 w-auto object-contain md:h-3/5"
            />
          </div>
          <div
            class="flex flex-col items-center justify-center gap-2 p-3 md:p-4"
          >
            <p class="font-bold text-red-600">Duplo Burger Bacon</p>
            <p class="text-sm text-gray-600">
              Dobro de sabor com bacon extra crocante.
            </p>
          </div>
        </div>
        <!-- Card 13: hamburguer -->
        <div
          class="card hover:scale-105 transition flex cursor-pointer flex-col overflow-hidden rounded-lg shadow-lg"
          data-id="13"
          data-count="0"
        >
          <div
            class="flex h-full max-h-36 items-end justify-center bg-gray-200 md:max-h-60"
          >
            <img
              src="imagens/hamburguer.png"
              alt="hamburguer"
              class="mb-6 h-4/5 w-auto object-contain md:h-3/5"
            />
          </div>
          <div
            class="flex flex-col items-center justify-center gap-2 p-3 md:p-4"
          >
            <p class="font-bold text-red-600">hamburguer</p>
            <p class="text-sm text-gray-600">
              O Hambúrguer Original: carne suculenta, queijo derretido e o molho
              que conquista a cada mordida!
            </p>
          </div>
        </div>
        <!-- Card 9: Cheeseburger -->
        <div
          class="card hover:scale-105 transition flex cursor-pointer flex-col overflow-hidden rounded-lg shadow-lg"
          data-id="9"
          data-count="0"
        >
          <div
            class="flex h-full max-h-36 items-end justify-center bg-gray-200 md:max-h-60"
          >
            <img
              src="imagens/Cheeseburger.png"
              alt="Cheeseburger"
              class="mb-6 h-4/5 w-auto object-contain md:h-3/5"
            />
          </div>
          <div
            class="flex flex-col items-center justify-center gap-2 p-3 md:p-4"
          >
            <p class="font-bold text-red-600">Cheeseburger</p>
            <p class="text-sm text-gray-600">
              Clássico com queijo derretido na medida certa.
            </p>
          </div>
        </div>
        <!-- Card 10: Chicken Jr -->
        <div
          class="card hover:scale-105 transition flex cursor-pointer flex-col overflow-hidden rounded-lg shadow-lg"
          data-id="10"
          data-count="0"
        >
          <div
            class="flex h-full max-h-36 items-end justify-center bg-gray-200 md:max-h-60"
          >
            <img
              src="imagens/Chicken-Jr.png"
              alt="Chicken Jr"
              class="mb-6 h-4/5 w-auto object-contain md:h-3/5"
            />
          </div>
          <div
            class="flex flex-col items-center justify-center gap-2 p-3 md:p-4"
          >
            <p class="font-bold text-red-600">Chicken Jr</p>
            <p class="text-sm text-gray-600">
              Pequeno no tamanho, gigante no sabor!
            </p>
          </div>
        </div>
        <!-- Card 11: Mc Crispy Chicken Legend -->
        <div
          class="card hover:scale-105 transition flex cursor-pointer flex-col overflow-hidden rounded-lg shadow-lg"
          data-id="11"
          data-count="0"
        >
          <div
            class="flex h-full max-h-36 items-end justify-center bg-gray-200 md:max-h-60"
          >
            <img
              src="imagens/Mc-Crispy-Chicken-Legend.png"
              alt="Mc Crispy Chicken Legend"
              class="mb-6 h-4/5 w-auto object-contain md:h-3/5"
            />
          </div>
          <div
            class="flex flex-col items-center justify-center gap-2 p-3 md:p-4"
          >
            <p class="font-bold text-red-600">Mc Crispy Chicken Legend</p>
            <p class="text-sm text-gray-600">
              O frango mais crocante que você já experimentou.
            </p>
          </div>
        </div>
        <!-- Card 12: Tasty Turbo Queijo -->
        <div
          class="card hover:scale-105 transition flex cursor-pointer flex-col overflow-hidden rounded-lg shadow-lg"
          data-id="12"
          data-count="0"
        >
          <div
            class="flex h-full max-h-36 items-end justify-center bg-gray-200 md:max-h-60"
          >
            <img
              src="imagens/Tasty-Turbo-Queijo.png"
              alt="Tasty Turbo Queijo"
              class="mb-6 h-4/5 w-auto object-contain md:h-3/5"
            />
          </div>
          <div
            class="flex flex-col items-center justify-center gap-2 p-3 md:p-4"
          >
            <p class="font-bold text-red-600">Tasty Turbo Queijo</p>
            <p class="text-sm text-gray-600">
              Queijo derretido e molho especial em um turbo de sabor!
            </p>
          </div>
        </div>
        <!-- Card 13: Novo Brabo Melt Onion Rings -->
        <div
          class="card hover:scale-105 transition flex cursor-pointer flex-col overflow-hidden rounded-lg shadow-lg"
          data-id="13"
          data-count="0"
        >
          <div
            class="flex h-full max-h-36 items-end justify-center bg-gray-200 md:max-h-60"
          >
            <img
              src="imagens/Novo-Brabo-Melt-Onion-Rings.png"
              alt="Novo Brabo Melt Onion Rings"
              class="mb-6 h-4/5 w-auto object-contain md:h-3/5"
            />
          </div>
          <div
            class="flex flex-col items-center justify-center gap-2 p-3 md:p-4"
          >
            <p class="font-bold text-red-600">Novo Brabo Melt Onion Rings</p>
            <p class="text-sm text-gray-600">
              Cebolas empanadas e queijo cremoso em um combo surpreendente!
            </p>
          </div>
        </div>
      </div>
    </section>
    <br />
    <!-- Botão Finalizar Pedido (sticky) -->
    <button
      id="finalizarPedido"
      class="hidden sticky bottom-4 mx-auto bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-6 rounded-full flex items-center justify-center gap-2 shadow-lg"
    >
      <img src="imagens/logo-mc-m.png" alt="Logo" class="h-6 w-auto" />
      Finalizar Pedido R$: 19,90
    </button>
    <br />
    <!-- Rodapé -->
    <footer class="bg-red-700 text-white">
      <div
        class="max-w-7xl mx-auto px-6 py-8 flex flex-col md:flex-row justify-between items-center"
      >
        <!-- Bloco da esquerda: Logo e Nome (lado a lado) -->
        <div class="flex items-center gap-4">
          <img
            src="imagens/logo-mc-skate.png"
            alt="McDonald's"
            class="w-32 h-auto"
          />
          <span class="text-2xl font-bold">McDonald's</span>
        </div>
        <!-- Bloco central: Textos de credibilidade (não clicáveis) -->
        <div class="mt-6 md:mt-0 text-center">
          <p class="text-sm">
            A qualidade que você conhece, a confiança que você merece.
          </p>
          <p class="text-xs mt-1">
            Comprometido com o sabor e a excelência desde 1955.
          </p>
        </div>
        <!-- Bloco da direita: Informações adicionais -->
        <div class="mt-6 md:mt-0 flex flex-col items-center md:items-end gap-2">
          <p class="text-sm">
            © 2025 McDonald's. Todos os direitos reservados.
          </p>
          <p class="text-xs">Orgulhosamente servindo felicidade.</p>
        </div>
      </div>
    </footer>

    <!-- Lógica de seleção, badges e atualização do preço dos lanches -->
    <script>
      function getGlobalTotal() {
        let total = 0;
        document.querySelectorAll(".card").forEach((card) => {
          total += parseInt(card.getAttribute("data-count")) || 0;
        });
        return total;
      }
      function updateCartPrice() {
        const total = getGlobalTotal();
        const cartPriceElem = document.getElementById("cartPrice");
        if (total === 1) {
          cartPriceElem.innerText = "R$ 9,95";
        } else if (total === 2) {
          cartPriceElem.innerText = "R$ 19,90";
        } else {
          cartPriceElem.innerText = "R$ 0,00";
        }
        document.getElementById("cartBadge").innerText = total;
      }
      function updateBadges() {
        document.querySelectorAll(".card").forEach((card) => {
          const badge = card.querySelector(".badge");
          const count = parseInt(card.getAttribute("data-count")) || 0;
          if (badge) badge.remove();
          if (count > 0) {
            const newBadge = document.createElement("span");
            newBadge.className = "badge";
            newBadge.innerText = count;
            card.appendChild(newBadge);
          }
        });
      }
      // Função para alternar (toggle) a contagem do card clicado
      function toggleCard(card) {
        let oldCount = parseInt(card.getAttribute("data-count")) || 0;
        const globalTotal = getGlobalTotal();
        // Calcula a soma dos lanches dos outros cards (excluindo o atual)
        const otherTotal = globalTotal - oldCount;
        let newCount = oldCount;

        if (oldCount === 0) {
          // Se este card está em 0 e os outros somam menos que 2, seta 1
          if (otherTotal < 2) {
            newCount = 1;
          } else {
            return;
          }
        } else if (oldCount === 1) {
          // Se este card já está em 1, só incrementa para 2 se nenhum outro lanche estiver selecionado; caso contrário, reseta para 0
          if (otherTotal === 0) {
            newCount = 2;
          } else {
            newCount = 0;
          }
        } else if (oldCount === 2) {
          newCount = 0;
        }
        card.setAttribute("data-count", newCount);
      }

      // Substitua o listener de clique para incluir event.stopPropagation()
      document.querySelectorAll(".card").forEach((card) => {
        card.addEventListener("click", (event) => {
          event.stopPropagation(); // Evita que o clique seja propagado para elementos filhos
          toggleCard(card);
          updateBadges();
          updateCartPrice();
          if (getGlobalTotal() === 2) {
            document
              .getElementById("finalizarPedido")
              .classList.remove("hidden");
          } else {
            document.getElementById("finalizarPedido").classList.add("hidden");
          }
        });
      });
      // Removemos o alert do finalize para utilizar o popup de bebidas
      // function finalizeOrder(beverage) { ... } será chamada depois no contexto do popup
    </script>

    <!-- Modal (popup) para upsell de bebida com layout "foto - nome - preço - | +", valor final e link de checkout -->
    <div
      id="popupModal"
      class="fixed inset-0 bg-gray-900 bg-opacity-50 flex justify-center items-center z-50"
      style="display: none"
    >
      <div class="bg-white rounded p-6 w-96">
        <h2 class="text-xl font-bold mb-4">Deseja Adicionar Bebida?</h2>
        <p class="mb-4">Selecione uma bebida (500 ml) por R$ 6,90</p>
        <!-- Lista de bebidas -->
        <div id="beverageList">
          <!-- Linha para Coca Cola -->
          <div
            class="flex items-center justify-between mb-2"
            data-drink="Coca Cola"
          >
            <div class="flex items-center gap-2">
              <img src="imagens/coca.png" alt="Coca Cola" class="w-12 h-12" />
              <div>
                <p class="font-bold">Coca Cola</p>
                <p class="text-sm text-gray-600">R$ 6,90</p>
              </div>
            </div>
            <div class="flex items-center gap-2">
              <button
                class="decrease bg-gray-200 rounded p-1"
                data-drink="Coca Cola"
              >
                –
              </button>
              <span class="quantity" data-drink="Coca Cola">0</span>
              <button
                class="increase bg-gray-200 rounded p-1"
                data-drink="Coca Cola"
              >
                +
              </button>
            </div>
          </div>
          <!-- Linha para Coca Zero -->
          <div
            class="flex items-center justify-between mb-2"
            data-drink="Coca Zero"
          >
            <div class="flex items-center gap-2">
              <img src="imagens/coca.png" alt="Coca Zero" class="w-12 h-12" />
              <div>
                <p class="font-bold">Coca Zero</p>
                <p class="text-sm text-gray-600">R$ 6,90</p>
              </div>
            </div>
            <div class="flex items-center gap-2">
              <button
                class="decrease bg-gray-200 rounded p-1"
                data-drink="Coca Zero"
              >
                –
              </button>
              <span class="quantity" data-drink="Coca Zero">0</span>
              <button
                class="increase bg-gray-200 rounded p-1"
                data-drink="Coca Zero"
              >
                +
              </button>
            </div>
          </div>
          <!-- Linha para Fanta Laranja -->
          <div
            class="flex items-center justify-between mb-2"
            data-drink="Fanta Laranja"
          >
            <div class="flex items-center gap-2">
              <img
                src="imagens/fanta-laranja.png"
                alt="Fanta Laranja"
                class="w-12 h-12"
              />
              <div>
                <p class="font-bold">Fanta Laranja</p>
                <p class="text-sm text-gray-600">R$ 6,90</p>
              </div>
            </div>
            <div class="flex items-center gap-2">
              <button
                class="decrease bg-gray-200 rounded p-1"
                data-drink="Fanta Laranja"
              >
                –
              </button>
              <span class="quantity" data-drink="Fanta Laranja">0</span>
              <button
                class="increase bg-gray-200 rounded p-1"
                data-drink="Fanta Laranja"
              >
                +
              </button>
            </div>
          </div>
          <!-- Linha para Fanta Guaraná -->
          <div
            class="flex items-center justify-between mb-2"
            data-drink="Fanta Guaraná"
          >
            <div class="flex items-center gap-2">
              <img
                src="imagens/fanta-guarana.png"
                alt="Fanta Guaraná"
                class="w-12 h-12"
              />
              <div>
                <p class="font-bold">Fanta Guaraná</p>
                <p class="text-sm text-gray-600">R$ 6,90</p>
              </div>
            </div>
            <div class="flex items-center gap-2">
              <button
                class="decrease bg-gray-200 rounded p-1"
                data-drink="Fanta Guaraná"
              >
                –
              </button>
              <span class="quantity" data-drink="Fanta Guaraná">0</span>
              <button
                class="increase bg-gray-200 rounded p-1"
                data-drink="Fanta Guaraná"
              >
                +
              </button>
            </div>
          </div>
          <!-- Linha para Suco de Laranja -->
          <div
            class="flex items-center justify-between mb-2"
            data-drink="Suco de Laranja"
          >
            <div class="flex items-center gap-2">
              <img
                src="imagens/suco-laranja.png"
                alt="Suco de Laranja"
                class="w-12 h-12"
              />
              <div>
                <p class="font-bold">Suco de Laranja</p>
                <p class="text-sm text-gray-600">R$ 6,90</p>
              </div>
            </div>
            <div class="flex items-center gap-2">
              <button
                class="decrease bg-gray-200 rounded p-1"
                data-drink="Suco de Laranja"
              >
                –
              </button>
              <span class="quantity" data-drink="Suco de Laranja">0</span>
              <button
                class="increase bg-gray-200 rounded p-1"
                data-drink="Suco de Laranja"
              >
                +
              </button>
            </div>
          </div>
          <!-- Linha para Suco de Uva -->
          <div
            class="flex items-center justify-between mb-2"
            data-drink="Suco de Uva"
          >
            <div class="flex items-center gap-2">
              <img
                src="imagens/suco-uva.png"
                alt="Suco de Uva"
                class="w-12 h-12"
              />
              <div>
                <p class="font-bold">Suco de Uva</p>
                <p class="text-sm text-gray-600">R$ 6,90</p>
              </div>
            </div>
            <div class="flex items-center gap-2">
              <button
                class="decrease bg-gray-200 rounded p-1"
                data-drink="Suco de Uva"
              >
                –
              </button>
              <span class="quantity" data-drink="Suco de Uva">0</span>
              <button
                class="increase bg-gray-200 rounded p-1"
                data-drink="Suco de Uva"
              >
                +
              </button>
            </div>
          </div>
          <!-- Linha para McShake Ovomaltine -->
          <div
            class="flex items-center justify-between mb-2"
            data-drink="McShake Ovomaltine"
          >
            <div class="flex items-center gap-2">
              <img
                src="imagens/milkshake-ovomaltine.png"
                alt="McShake Ovomaltine"
                class="w-12 h-12"
              />
              <div>
                <p class="font-bold">McShake Ovomaltine</p>
                <p class="text-sm text-gray-600">R$ 6,90</p>
              </div>
            </div>
            <div class="flex items-center gap-2">
              <button
                class="decrease bg-gray-200 rounded p-1"
                data-drink="McShake Ovomaltine"
              >
                –
              </button>
              <span class="quantity" data-drink="McShake Ovomaltine">0</span>
              <button
                class="increase bg-gray-200 rounded p-1"
                data-drink="McShake Ovomaltine"
              >
                +
              </button>
            </div>
          </div>
          <!-- Linha para Suco de Uva -->
          <div
            class="flex items-center justify-between mb-2"
            data-drink="McShake Morango"
          >
            <div class="flex items-center gap-2">
              <img
                src="imagens/milkshake-morango.png"
                alt="McShake Morango"
                class="w-12 h-12"
              />
              <div>
                <p class="font-bold">McShake Morango</p>
                <p class="text-sm text-gray-600">R$ 6,90</p>
              </div>
            </div>
            <div class="flex items-center gap-2">
              <button
                class="decrease bg-gray-200 rounded p-1"
                data-drink="McShake Morango"
              >
                –
              </button>
              <span class="quantity" data-drink="McShake Morango">0</span>
              <button
                class="increase bg-gray-200 rounded p-1"
                data-drink="McShake Morango"
              >
                +
              </button>
            </div>
          </div>
        </div>
        <!-- Área de exibição do valor final -->
        <div class="mt-4 text-center font-bold">
          <span id="finalPriceText">Total: R$ 19,90</span>
        </div>
        <!-- Botões do modal -->
        <div class="mt-4">
          <!-- Link que se comporta como botão; seu href e texto serão atualizados dinamicamente -->
          <a
            id="modalFinalize"
            href="checkout-mc-donalds/nova-etapa-19,90/index.html"
            class="block w-full bg-green-600 text-white text-center rounded p-2"
          >
            Finalizar Pedido - R$ 19,90
          </a>
          <button id="cancelPopup" class="mt-2 w-full bg-gray-300 rounded p-2">
            Desejo Somente os Lanches
          </button>
        </div>
      </div>
    </div>

    <!-- Scripts de lógica dos lanches -->
    <script>
      function getGlobalTotal() {
        let total = 0;
        document.querySelectorAll(".card").forEach((card) => {
          total += parseInt(card.getAttribute("data-count")) || 0;
        });
        return total;
      }
      function updateCartPrice() {
        const total = getGlobalTotal();
        const cartPriceElem = document.getElementById("cartPrice");
        if (total === 1) {
          cartPriceElem.innerText = "R$ 9,95";
        } else if (total === 2) {
          cartPriceElem.innerText = "R$ 19,90";
        } else {
          cartPriceElem.innerText = "R$ 0,00";
        }
        document.getElementById("cartBadge").innerText = total;
      }
      function updateBadges() {
        document.querySelectorAll(".card").forEach((card) => {
          const badge = card.querySelector(".badge");
          const count = parseInt(card.getAttribute("data-count")) || 0;
          if (badge) badge.remove();
          if (count > 0) {
            const newBadge = document.createElement("span");
            newBadge.className = "badge";
            newBadge.innerText = count;
            card.appendChild(newBadge);
          }
        });
      }
      // Função para alternar (toggle) a contagem do card clicado
      function toggleCard(card) {
        let oldCount = parseInt(card.getAttribute("data-count")) || 0;
        const allCards = document.querySelectorAll(".card");

        // Obtém todos os cards que estão selecionados (com count 1 ou 2)
        let selectedCards = [...allCards].filter(
          (c) => parseInt(c.getAttribute("data-count")) > 0
        );
        let globalTotal = selectedCards.reduce(
          (sum, c) => sum + parseInt(c.getAttribute("data-count")),
          0
        );

        if (oldCount === 0) {
          // Se não há unidades, pode adicionar 1
          if (globalTotal < 2) {
            card.setAttribute("data-count", 1);
          }
        } else if (oldCount === 1) {
          // Se o card já tem 1 unidade, aumenta para 2 se não houver outros com 1
          if (globalTotal < 2) {
            card.setAttribute("data-count", 2);
          } else {
            // Se já tem 2 unidades no total, desmarcar este card
            card.setAttribute("data-count", 0);
          }
        } else if (oldCount === 2) {
          // Se o card já tem 2 unidades, ao clicar desmarca
          card.setAttribute("data-count", 1);
        }

        // Atualiza a exibição das contagens
        updateCounts();

        // Atualiza o botão de finalizar pedido
        if (getGlobalTotal() === 2) {
          document.getElementById("finalizarPedido").classList.remove("hidden");
        } else {
          document.getElementById("finalizarPedido").classList.add("hidden");
        }
      }

      // Função para atualizar a exibição das contagens
      function updateCounts() {
        document.querySelectorAll(".card").forEach((card) => {
          let count = card.getAttribute("data-count") || 0;
          // Supondo que você tenha um elemento para exibir a quantidade
          let countDisplay = card.querySelector(".count-display"); // Ajuste o seletor conforme sua estrutura
          if (countDisplay) {
            countDisplay.textContent = count > 0 ? count : ""; // Atualiza o texto com a contagem ou limpa
          }
        });
      }

      // Adicionando os ouvintes de eventos
      document.querySelectorAll(".card").forEach((card) => {
        card.addEventListener("click", (event) => {
          event.stopPropagation();
          toggleCard(card);
          updateBadges();
          updateCartPrice();
        });
      });

      //Explicações do codigo 👇🏻
      // o seguinte trecho ordena com quantos lanches vai aparecer o botão de finalizar pedido = if (getGlobalTotal() === 2) {
      //
      //
      //
      //
      // Substitua o listener de clique para incluir event.stopPropagation()
      document.querySelectorAll(".card").forEach((card) => {
        card.addEventListener("click", (event) => {
          event.stopPropagation(); // Evita que o clique seja propagado para elementos filhos
          toggleCard(card);
          updateBadges();
          updateCartPrice();
          if (getGlobalTotal() === 2) {
            document
              .getElementById("finalizarPedido")
              .classList.remove("hidden");
          } else {
            document.getElementById("finalizarPedido").classList.add("hidden");
          }
        });
      });
      // Removemos o alert final do pedido, pois agora o fluxo é pelo popup de bebidas.
    </script>

    <!-- Scripts do Popup de Bebida e Checkout Dinâmico -->
    <script>
      // Variáveis para controle do upsell de bebidas
      // Neste exemplo, permitimos apenas 0 ou 1 unidade por pedido
      let selectedBeverage = null; // Nome da bebida selecionada (se houver)
      const beverageQuantities = {};
      // Links de checkout: um para o pedido sem bebida e outro para o pedido com bebida
      const checkoutLinkNoBeverage =
        "checkout-mc-donalds/nova-etapa-19,90/index.html";
      const checkoutLinkWithBeverage =
        "checkout-mc-donalds/nova-etapa-26,80/index.html";
      const basePrice = 19.9;
      const beveragePrice = 6.9;
      // Inicializa a quantidade de cada bebida para 0
      document.querySelectorAll("#beverageList .quantity").forEach((span) => {
        const drink = span.getAttribute("data-drink");
        beverageQuantities[drink] = 0;
      });
      // Atualiza os controles das bebidas: se uma bebida estiver selecionada, desabilita os botões de outras opções
      function updateBeverageOptions() {
        if (selectedBeverage) {
          // Para a bebida selecionada, desabilita o botão “+” se a quantidade for 1
          document
            .querySelectorAll(
              `#beverageList .increase[data-drink="${selectedBeverage}"]`
            )
            .forEach((btn) => {
              if (beverageQuantities[selectedBeverage] >= 1) {
                btn.disabled = true;
                btn.classList.add("opacity-50");
              }
            });
          // Desabilita controles para as outras bebidas
          document
            .querySelectorAll("#beverageList .increase")
            .forEach((btn) => {
              if (btn.getAttribute("data-drink") !== selectedBeverage) {
                btn.disabled = true;
                btn.classList.add("opacity-50");
              }
            });
          document
            .querySelectorAll("#beverageList .decrease")
            .forEach((btn) => {
              if (btn.getAttribute("data-drink") !== selectedBeverage) {
                btn.disabled = true;
                btn.classList.add("opacity-50");
              }
            });
        } else {
          // Se nenhuma bebida estiver selecionada, habilita todas as opções
          document
            .querySelectorAll(
              "#beverageList .increase, #beverageList .decrease"
            )
            .forEach((btn) => {
              btn.disabled = false;
              btn.classList.remove("opacity-50");
            });
        }
        updateFinalPrice();
      }
      // Atualiza o valor final e o link de checkout do modal
      function updateFinalPrice() {
        let finalPrice = basePrice;
        if (selectedBeverage && beverageQuantities[selectedBeverage] >= 1) {
          finalPrice += beveragePrice;
        }
        document.getElementById(
          "finalPriceText"
        ).innerText = `Total: R$ ${finalPrice.toFixed(2)}`;
        const modalFinalize = document.getElementById("modalFinalize");
        modalFinalize.innerText = `Finalizar Pedido - R$ ${finalPrice.toFixed(
          2
        )}`;
        modalFinalize.href =
          finalPrice === basePrice
            ? checkoutLinkNoBeverage
            : checkoutLinkWithBeverage;
      }
      // Eventos para os botões “+”
      document.querySelectorAll("#beverageList .increase").forEach((btn) => {
        btn.addEventListener("click", () => {
          const drink = btn.getAttribute("data-drink");
          if (!selectedBeverage) {
            selectedBeverage = drink;
          } else if (selectedBeverage !== drink) {
            return;
          }
          if (beverageQuantities[drink] < 1) {
            beverageQuantities[drink]++;
          }
          document.querySelector(
            `#beverageList .quantity[data-drink="${drink}"]`
          ).innerText = beverageQuantities[drink];
          updateBeverageOptions();
        });
      });
      // Eventos para os botões “–”
      document.querySelectorAll("#beverageList .decrease").forEach((btn) => {
        btn.addEventListener("click", () => {
          const drink = btn.getAttribute("data-drink");
          if (selectedBeverage !== drink) {
            return;
          }
          if (beverageQuantities[drink] > 0) {
            beverageQuantities[drink]--;
            document.querySelector(
              `#beverageList .quantity[data-drink="${drink}"]`
            ).innerText = beverageQuantities[drink];
            if (beverageQuantities[drink] === 0) {
              selectedBeverage = null;
            }
            updateBeverageOptions();
          }
        });
      });
      // Ao clicar no botão Finalizar do modal
      document
        .getElementById("modalFinalize")
        .addEventListener("click", (e) => {
          e.preventDefault();
          // Aqui chamamos a função finalizeOrder (pode ser substituída por redirecionamento)
          const beverage = selectedBeverage
            ? {
                name: selectedBeverage,
                quantity: beverageQuantities[selectedBeverage],
              }
            : null;
          // Exemplo: exibe um alert com o resumo – em produção, redirecione com window.location.href
          let summary = "Pedido finalizado:\n";
          // Aqui você pode incluir os lanches selecionados se desejar
          summary += document.getElementById("finalPriceText").innerText;
          if (beverage && beverage.quantity > 0) {
            summary += `\nBebida: ${beverage.name} x${beverage.quantity} (R$ 6,90 cada)`;
          }
          // Redireciona para o checkout conforme o link atualizado
          window.location.href = document.getElementById("modalFinalize").href;
          document.getElementById("popupModal").style.display = "none";
        });
      // Se o usuário clicar em "Não, obrigado"
      document.getElementById("cancelPopup").addEventListener("click", () => {
        // Finaliza sem bebida – exemplo com alert, depois redireciona
        window.location.href = checkoutLinkNoBeverage;
        document.getElementById("popupModal").style.display = "none";
      });
      // Ao clicar no botão Finalizar Pedido (dos lanches), exibe o modal de bebidas
      document
        .getElementById("finalizarPedido")
        .addEventListener("click", () => {
          selectedBeverage = null;
          document
            .querySelectorAll("#beverageList .quantity")
            .forEach((span) => {
              const drink = span.getAttribute("data-drink");
              beverageQuantities[drink] = 0;
              span.innerText = "0";
            });
          updateBeverageOptions();
          document.getElementById("popupModal").style.display = "flex";
        });
    </script>

    <!-- Preloader -->
    <style>
      /* Oculta o conteúdo da página até o preloader desaparecer */
      #conteudo {
        display: none;
      }
      /* Estilo do Preloader */
      #preloader {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100vh;
        background-color: #fbc21b;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 9999;
      }
      /* Ajuste do tamanho do GIF */
      #preloader img {
        width: 750px;
      }
    </style>
    <!-- Preloader (GIF de carregamento)-->
    <div id="preloader">
      <img src="imagens/gif-mc-carregando-lanche.gif" alt="Carregando..." />
    </div>
    <script>
      // Aguarda 3.5 segundos após o carregamento da página para ocultar o preloader e exibir o conteúdo
      window.addEventListener("load", () => {
        setTimeout(() => {
          document.getElementById("preloader").style.display = "none";
          document.getElementById("conteudo").style.display = "block";
        }, 3500);
      });
    </script>
  </body>
</html>
